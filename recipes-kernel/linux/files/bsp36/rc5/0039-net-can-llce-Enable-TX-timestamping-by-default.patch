From 1c920b9965d7f57a438f05a4ba9e098095c2b058 Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Fri, 13 Jan 2023 10:50:49 +0200
Subject: [PATCH 39/63] net/can: llce: Enable TX timestamping by default

Issue: ALB-9261
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/net/can/llce/llce_can.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/net/can/llce/llce_can.c b/drivers/net/can/llce/llce_can.c
index 14354c86cfdc..218d3f83e566 100644
--- a/drivers/net/can/llce/llce_can.c
+++ b/drivers/net/can/llce/llce_can.c
@@ -1,5 +1,5 @@
 // SPDX-License-Identifier: GPL-2.0+ OR BSD-3-Clause
-/* Copyright 2020-2022 NXP */
+/* Copyright 2020-2023 NXP */
 #include <linux/can/dev.h>
 #include <linux/can/dev/llce_can_common.h>
 #include <linux/clk.h>
@@ -124,7 +124,8 @@ static int llce_can_init(struct llce_can *llce)
 		.cmd_id = LLCE_CAN_CMD_INIT,
 		.cmd_list.init = {
 			.ctrl_config = LLCE_CAN_CONTROLLERCONFIG_CTRL_EN
-			    | LLCE_CAN_CONTROLLERCONFIG_ABR_EN,
+			    | LLCE_CAN_CONTROLLERCONFIG_ABR_EN
+			    | LLCE_CAN_CONTROLLERCONFIG_TST_END,
 			.tx_mb_count = LLCE_CAN_MAX_TX_MB,
 		},
 	};
-- 
2.25.1

