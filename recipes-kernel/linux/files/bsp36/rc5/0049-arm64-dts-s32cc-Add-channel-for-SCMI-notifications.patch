From 40dacd05709cfca4043d2bb58cb892f7c2babbc3 Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Mon, 28 Nov 2022 10:20:19 +0200
Subject: [PATCH 49/63] arm64: dts: s32cc: Add channel for SCMI notifications

Issue: ALB-9425
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm64/boot/dts/freescale/s32cc.dtsi | 16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/s32cc.dtsi b/arch/arm64/boot/dts/freescale/s32cc.dtsi
index eb11abd8003c..ebfd974d6bf2 100644
--- a/arch/arm64/boot/dts/freescale/s32cc.dtsi
+++ b/arch/arm64/boot/dts/freescale/s32cc.dtsi
@@ -160,9 +160,15 @@ pci_shared_memory1: shm@c0400000 {
 			no-map;
 		};
 
-		scmi_shbuf: shm@d0000000 {
+		scmi_tx_buf: shm@d0000000 {
 			compatible = "arm,scmi-shmem";
-			reg = <0x0 0xd0000000 0x0 0x400000>;	/* 4 MB */
+			reg = <0x0 0xd0000000 0x0 0x80>;
+			no-map;
+		};
+
+		scmi_rx_buf: shm@d0000080 {
+			compatible = "arm,scmi-shmem";
+			reg = <0x0 0xd0000080 0x0 0x80>;
 			no-map;
 		};
 
@@ -190,12 +196,14 @@ serdes_125_ext: serdes_125_ext {
 	firmware {
 		scmi: scmi {
 			compatible = "arm,scmi-smc";
-			mbox-names = "tx";
-			shmem = <&scmi_shbuf>;
+			mbox-names = "tx", "rx";
+			shmem = <&scmi_tx_buf>, <&scmi_rx_buf>;
 			arm,smc-id = <0xc20000fe>;
 			#address-cells = <1>;
 			#size-cells = <0>;
 			status = "okay";
+			interrupts = <GIC_SPI 300 IRQ_TYPE_EDGE_RISING>;
+			interrupt-names = "p2a_notif";
 
 			dfs: protocol@13 {
 				reg = <0x13>;
-- 
2.25.1

