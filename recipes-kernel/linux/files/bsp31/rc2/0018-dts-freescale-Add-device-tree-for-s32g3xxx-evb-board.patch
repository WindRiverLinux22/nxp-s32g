From 51370b07c052b956763a526b7554df1aab3783f1 Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Mon, 27 Sep 2021 16:16:20 +0300
Subject: [PATCH 18/20] dts/freescale: Add device tree for s32g3xxx-evb board

Issue: ALB-7737
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm64/boot/dts/freescale/Makefile             |  3 ++-
 arch/arm64/boot/dts/freescale/fsl-s32g274a.dtsi    |  2 +-
 arch/arm64/boot/dts/freescale/fsl-s32g2xxa-evb.dts | 13 +++++++++++++
 arch/arm64/boot/dts/freescale/fsl-s32g3xxa-evb.dts | 12 ++++++++++++
 ...{fsl-s32g274a-evb.dts => fsl-s32gxxxa-evb.dtsi} | 14 ++------------
 5 files changed, 30 insertions(+), 14 deletions(-)
 create mode 100644 arch/arm64/boot/dts/freescale/fsl-s32g2xxa-evb.dts
 create mode 100644 arch/arm64/boot/dts/freescale/fsl-s32g3xxa-evb.dts
 rename arch/arm64/boot/dts/freescale/{fsl-s32g274a-evb.dts => fsl-s32gxxxa-evb.dtsi} (97%)

diff --git a/arch/arm64/boot/dts/freescale/Makefile b/arch/arm64/boot/dts/freescale/Makefile
index a6d8fd6ceac4..a4008d726330 100644
--- a/arch/arm64/boot/dts/freescale/Makefile
+++ b/arch/arm64/boot/dts/freescale/Makefile
@@ -54,7 +54,8 @@ dtb-$(CONFIG_ARCH_MXC) += imx8qxp-mek.dtb
 dtb-$(CONFIG_ARCH_S32) += fsl-s32g274a-simulator.dtb
 dtb-$(CONFIG_ARCH_S32) += fsl-s32g274a-bluebox3.dtb
 dtb-$(CONFIG_ARCH_S32) += fsl-s32g274a-emu.dtb
-dtb-$(CONFIG_ARCH_S32) += fsl-s32g274a-evb.dtb
+dtb-$(CONFIG_ARCH_S32) += fsl-s32g2xxa-evb.dtb
+dtb-$(CONFIG_ARCH_S32) += fsl-s32g3xxa-evb.dtb
 dtb-$(CONFIG_ARCH_S32) += fsl-s32g274a-rdb.dtb
 dtb-$(CONFIG_ARCH_S32) += fsl-s32g274a-rdb2.dtb
 dtb-$(CONFIG_ARCH_S32) += fsl-s32g398a-emu.dtb
diff --git a/arch/arm64/boot/dts/freescale/fsl-s32g274a.dtsi b/arch/arm64/boot/dts/freescale/fsl-s32g274a.dtsi
index bfdf53202f3a..b31970778eda 100644
--- a/arch/arm64/boot/dts/freescale/fsl-s32g274a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-s32g274a.dtsi
@@ -6,8 +6,8 @@
  *
  */
 
-/dts-v1/;
 #include "fsl-s32g.dtsi"
+
 / {
 	clks: clks@40038000 {
 		compatible = "fsl,s32g274a-clocking";
diff --git a/arch/arm64/boot/dts/freescale/fsl-s32g2xxa-evb.dts b/arch/arm64/boot/dts/freescale/fsl-s32g2xxa-evb.dts
new file mode 100644
index 000000000000..8d7f3bde118e
--- /dev/null
+++ b/arch/arm64/boot/dts/freescale/fsl-s32g2xxa-evb.dts
@@ -0,0 +1,13 @@
+// SPDX-License-Identifier: GPL-2.0-or-later
+/*
+ * Copyright 2021 NXP
+ */
+
+/dts-v1/;
+#include "fsl-s32g274a.dtsi"
+#include "fsl-s32gxxxa-evb.dtsi"
+/ {
+	model = "Freescale S32G274A";
+	compatible = "fsl,s32g274-simu", "fsl,s32g274",
+		   "arm,vexpress,v2p-aarch64", "arm,vexpress";
+};
diff --git a/arch/arm64/boot/dts/freescale/fsl-s32g3xxa-evb.dts b/arch/arm64/boot/dts/freescale/fsl-s32g3xxa-evb.dts
new file mode 100644
index 000000000000..2ec4eae171ca
--- /dev/null
+++ b/arch/arm64/boot/dts/freescale/fsl-s32g3xxa-evb.dts
@@ -0,0 +1,12 @@
+// SPDX-License-Identifier: GPL-2.0-or-later
+/*
+ * Copyright 2021 NXP
+ */
+
+/dts-v1/;
+#include "fsl-s32g398a.dtsi"
+#include "fsl-s32gxxxa-evb.dtsi"
+/ {
+	model = "Freescale S32G399A";
+	compatible = "fsl,s32g399", "arm,vexpress";
+};
diff --git a/arch/arm64/boot/dts/freescale/fsl-s32g274a-evb.dts b/arch/arm64/boot/dts/freescale/fsl-s32gxxxa-evb.dtsi
similarity index 97%
rename from arch/arm64/boot/dts/freescale/fsl-s32g274a-evb.dts
rename to arch/arm64/boot/dts/freescale/fsl-s32gxxxa-evb.dtsi
index 2aadcbb4f7ed..143588cad47f 100644
--- a/arch/arm64/boot/dts/freescale/fsl-s32g274a-evb.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-s32gxxxa-evb.dtsi
@@ -1,22 +1,12 @@
 // SPDX-License-Identifier: GPL-2.0-or-later
 /*
  * Copyright 2019-2021 NXP
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation; either version 2 of the License, or
- * (at your option) any later version.
  */
-
-/dts-v1/;
-#include "fsl-s32g274a.dtsi"
+#include "fsl-s32g.dtsi"
 #include <dt-bindings/gpio/gpio.h>
 #include <dt-bindings/pinctrl/s32g-pinctrl.h>
-/ {
-	model = "Freescale S32G274";
-	compatible = "fsl,s32g274-simu", "fsl,s32g274",
-				 "arm,vexpress,v2p-aarch64", "arm,vexpress";
 
+/ {
 	chosen {
 		stdout-path = "serial0:115200n8";
 	};
-- 
2.17.1

