From 8183496e4935a78df20963fea8d66fb128ab5296 Mon Sep 17 00:00:00 2001
From: Ciprian Costea <ciprianmarian.costea@nxp.com>
Date: Wed, 13 Jul 2022 13:06:00 +0300
Subject: [PATCH 6/6] s32cc: cpu: Define cluster topology

Issue: ALB-9030
Upstream-Status: Pending 

Signed-off-by: Ciprian Costea <ciprianmarian.costea@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 fdts/s32cc.dtsi | 22 ++++++++++++++++++++++
 fdts/s32g3.dtsi | 20 ++++++++++++++++++++
 2 files changed, 42 insertions(+)

diff --git a/fdts/s32cc.dtsi b/fdts/s32cc.dtsi
index 4da305dd0..d9d6ab44e 100644
--- a/fdts/s32cc.dtsi
+++ b/fdts/s32cc.dtsi
@@ -96,6 +96,28 @@
 		#size-cells = <0>;
 		u-boot,dm-pre-reloc;
 
+		cpu-map {
+			cluster0 {
+				core0 {
+					cpu = <&cpu0>;
+				};
+
+				core1 {
+					cpu = <&cpu1>;
+				};
+			};
+
+			cluster1 {
+				core0 {
+					cpu = <&cpu2>;
+				};
+
+				core1 {
+					cpu = <&cpu3>;
+				};
+			};
+		};
+
 		cpu0: cpu@0 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a53";
diff --git a/fdts/s32g3.dtsi b/fdts/s32g3.dtsi
index 065c8ebbf..2be907b21 100644
--- a/fdts/s32g3.dtsi
+++ b/fdts/s32g3.dtsi
@@ -20,6 +20,26 @@
 	};
 
 	cpus {
+		cluster0 {
+			core2 {
+				cpu = <&cpu4>;
+			};
+
+			core3 {
+				cpu = <&cpu5>;
+			};
+		};
+
+		cluster1 {
+			core2 {
+				cpu = <&cpu6>;
+			};
+
+			core3 {
+				cpu = <&cpu7>;
+			};
+		};
+
 		cpu4: cpu@2 {
 			device_type = "cpu";
 			compatible = "arm,cortex-a53";
-- 
2.17.1

