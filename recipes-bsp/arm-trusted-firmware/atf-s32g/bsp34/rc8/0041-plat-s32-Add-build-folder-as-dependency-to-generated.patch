From 4523ee73e91cd3ad7d3f8861cc30dc002e134578 Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Tue, 6 Sep 2022 09:48:38 +0300
Subject: [PATCH 41/42] plat: s32: Add build folder as dependency to generated
 files

Create destination folder before generating a file.

Issue: ALB-9235
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 plat/nxp/s32/s32_common.mk | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/plat/nxp/s32/s32_common.mk b/plat/nxp/s32/s32_common.mk
index 2171f672a..cf0e4dc8a 100644
--- a/plat/nxp/s32/s32_common.mk
+++ b/plat/nxp/s32/s32_common.mk
@@ -305,7 +305,7 @@ ${FIP_QSPI_OFFSET_FILE}: ${IVT_LOCATION_FILE} ${FIP_OFFSET_FILE}
 	${ECHO} "  CREATE  $@"
 	${Q}[ "$$(cat "${IVT_LOCATION_FILE}")" = "QSPI" ] && cat "${FIP_OFFSET_FILE}" > "$@" || echo "0" > "$@"
 
-${FIP_MEMORY_OFFSET_FILE}: FORCE
+${FIP_MEMORY_OFFSET_FILE}: FORCE | ${BUILD_PLAT}
 	${ECHO} "  CREATE  $@"
 	${Q}echo "0" > "$@"
 else
@@ -327,15 +327,15 @@ FIP_MMC_OFFSET ?= 0
 FIP_QSPI_OFFSET ?= 0
 FIP_MEMORY_OFFSET ?= 0
 
-${FIP_MMC_OFFSET_FILE}: FORCE
+${FIP_MMC_OFFSET_FILE}: FORCE | ${BUILD_PLAT}
 	${ECHO} "  CREATE  $@"
 	${Q}echo "${FIP_MMC_OFFSET}" > "$@"
 
-${FIP_QSPI_OFFSET_FILE}: FORCE
+${FIP_QSPI_OFFSET_FILE}: FORCE | ${BUILD_PLAT}
 	${ECHO} "  CREATE  $@"
 	${Q}echo "${FIP_QSPI_OFFSET}" > "$@"
 
-${FIP_MEMORY_OFFSET_FILE}: FORCE
+${FIP_MEMORY_OFFSET_FILE}: FORCE | ${BUILD_PLAT}
 	${ECHO} "  CREATE  $@"
 	${Q}echo "${FIP_MEMORY_OFFSET}" > "$@"
 endif
-- 
2.17.1

