From 5e0faaae34cc0ab914dd99a69225a366e3166c0e Mon Sep 17 00:00:00 2001
From: Dan Nica <dan.nica@nxp.com>
Date: Wed, 20 Jul 2022 20:06:22 +0300
Subject: [PATCH 09/42] s32: mmc: Call s32_mmc_init before sending MMC commands

Issue: ALB-9078
Upstream-Status: Pending 

Signed-off-by: Dan Nica <dan.nica@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 drivers/nxp/s32/mmc/s32_mmc.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/nxp/s32/mmc/s32_mmc.c b/drivers/nxp/s32/mmc/s32_mmc.c
index 7490f8fbb..5533e268f 100644
--- a/drivers/nxp/s32/mmc/s32_mmc.c
+++ b/drivers/nxp/s32/mmc/s32_mmc.c
@@ -386,6 +386,8 @@ int s32_mmc_register(void)
 	struct mmc_device_info *device_info;
 	unsigned int clk, bus_width;
 
+	s32_mmc_init();
+
 	if (s32_is_card_emmc()) {
 		device_info = &emmc_device_info;
 		bus_width = MMC_BUS_WIDTH_8;
-- 
2.17.1

