From 2e7774d616c3e45f4791fedc443006da2718803b Mon Sep 17 00:00:00 2001
From: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Date: Wed, 13 Jul 2022 10:48:46 +0300
Subject: [PATCH 023/102] arm: s32cc: Correct the validation of the length
 returned by hwconfig_subarg

Issue: ALB-8357
Upstream-Status: Pending 

Signed-off-by: Ghennadi Procopciuc <ghennadi.procopciuc@nxp.com>
Signed-off-by: Zhantao Tang <zhantao.tang@windriver.com>
---
 arch/arm/mach-s32/s32-cc/serdes_hwconfig.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-s32/s32-cc/serdes_hwconfig.c b/arch/arm/mach-s32/s32-cc/serdes_hwconfig.c
index 8a272b5cf7..78be1761df 100644
--- a/arch/arm/mach-s32/s32-cc/serdes_hwconfig.c
+++ b/arch/arm/mach-s32/s32-cc/serdes_hwconfig.c
@@ -96,7 +96,7 @@ char *s32_serdes_get_hwconfig_subarg(int id,
 
 	subarg_str = (char *)hwconfig_subarg(serdes_name, subarg, subarg_len);
 
-	if (!subarg_str || !subarg_len) {
+	if (!subarg_str || !*subarg_len) {
 		/* Backwards compatibility:
 		 * Initially the SerDes mode was set by using option `pciex`.
 		 */
@@ -106,7 +106,7 @@ char *s32_serdes_get_hwconfig_subarg(int id,
 		subarg_str = (char *)hwconfig_subarg(serdes_name, subarg,
 			subarg_len);
 
-		if (!subarg_str || !subarg_len) {
+		if (!subarg_str || !*subarg_len) {
 			debug("'serdes%d' option '%s' not found in hwconfig\n",
 			      id, subarg);
 			return NULL;
-- 
2.17.1

